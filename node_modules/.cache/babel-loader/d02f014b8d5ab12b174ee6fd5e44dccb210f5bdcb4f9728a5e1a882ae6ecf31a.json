{"ast":null,"code":"// 文件：src/components/HeroOpening.jsx\nimport React,{useEffect,useState,useRef}from'react';import{motion,AnimatePresence}from'framer-motion';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const HeroOpening=()=>{const fullText='这几年，宁波的空气怎么样了？';const[displayedText,setDisplayedText]=useState('');const[fadeOut,setFadeOut]=useState(false);const seed=useRef(Math.random()*1000);const startTimeRef=useRef(Date.now());const rafRef=useRef();// 打字 + 1.5s 后触发消失\nuseEffect(()=>{window.scrollTo(0,0);let i=0;const typing=setInterval(()=>{setDisplayedText(fullText.slice(0,i+1));i++;if(i>fullText.length){clearInterval(typing);setTimeout(()=>setFadeOut(true),1500);}},100);return()=>clearInterval(typing);},[]);// 请求动画帧循环（给波浪用）\nuseEffect(()=>{function loop(){rafRef.current=requestAnimationFrame(loop);}loop();return()=>cancelAnimationFrame(rafRef.current);},[]);// 生成“指纹式”统一波浪\nconst generateWavePaths=()=>{const t=(Date.now()-startTimeRef.current)/1000;const H=window.innerHeight;const spacing=16;const count=Math.floor(H/spacing)+4;const maxAmp=30;const paths=[];for(let i=0;i<count;i++){const y=i*spacing+10;const norm=(i-count/2)/(count/2);const amp=Math.cos(norm*Math.PI)*maxAmp*(0.5+0.5*Math.sin(t))+5;const phase=seed.current+t*1.2;const offset=Math.sin(phase+i*0.25)*amp;// 三段路径拼接以保证无空缺\nconst d=\"\\n        M0,\".concat(y,\"\\n        Q480,\").concat(y-offset,\" 960,\").concat(y,\"\\n        T1920,\").concat(y,\"\\n        T2880,\").concat(y,\"\\n      \");paths.push(/*#__PURE__*/_jsx(\"path\",{d:d,stroke:\"#e6374e\",strokeWidth:\"1.3\",fill:\"none\",opacity:\"0.25\"},i));}return paths;};return/*#__PURE__*/_jsx(AnimatePresence,{children:!fadeOut&&/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:1,scale:1},animate:{opacity:1,scale:1},exit:{opacity:0,y:-250,scale:1.2,filter:'blur(8px)',transition:{duration:2.6,ease:[0.22,1,0.36,1]}},style:{position:'fixed',top:0,left:0,right:0,height:'100vh',background:'#000',overflow:'hidden',zIndex:9999,display:'flex',justifyContent:'center',alignItems:'center',flexDirection:'column',textAlign:'center'},onClick:()=>setFadeOut(true)// 点击可跳过\n,children:[/*#__PURE__*/_jsx(motion.h1,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:2},style:{color:'#f96c86',fontSize:'2.4rem',zIndex:2},children:displayedText}),/*#__PURE__*/_jsx(motion.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:2,duration:1},style:{color:'#888',fontSize:'0.9rem',marginTop:'0.5rem',zIndex:2},children:\"By Nick Cao, Peter Zhou, Toby Wang\"}),/*#__PURE__*/_jsx(motion.div,{initial:{scaleX:0},animate:{scaleX:1},transition:{delay:2.5,duration:0.8,ease:'easeOut'},style:{width:'60%',height:'1px',background:'#444',margin:'0.2rem auto 1rem',transformOrigin:'left center',zIndex:2}}),/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 2880 1000\",preserveAspectRatio:\"none\",style:{position:'absolute',top:0,left:0,width:'calc(100% + 240px)',height:'100%',pointerEvents:'none',animation:'waveScroll 8s linear infinite',zIndex:1},children:generateWavePaths()}),/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',bottom:0,left:0,width:'100%',height:'160px',background:'linear-gradient(to top, #7a2d40aa 0%, transparent 100%)',animation:'bottomGlow 4s ease-in-out infinite alternate',zIndex:0}}),/*#__PURE__*/_jsx(\"style\",{children:\"\\n            @keyframes waveScroll {\\n              0% { transform: translateX(0); }\\n              100% { transform: translateX(-240px); }\\n            }\\n            @keyframes bottomGlow {\\n              0% { opacity: 0.2; }\\n              100% { opacity: 0.5; }\\n            }\\n          \"})]})});};export default HeroOpening;","map":{"version":3,"names":["React","useEffect","useState","useRef","motion","AnimatePresence","jsx","_jsx","jsxs","_jsxs","HeroOpening","fullText","displayedText","setDisplayedText","fadeOut","setFadeOut","seed","Math","random","startTimeRef","Date","now","rafRef","window","scrollTo","i","typing","setInterval","slice","length","clearInterval","setTimeout","loop","current","requestAnimationFrame","cancelAnimationFrame","generateWavePaths","t","H","innerHeight","spacing","count","floor","maxAmp","paths","y","norm","amp","cos","PI","sin","phase","offset","d","concat","push","stroke","strokeWidth","fill","opacity","children","div","initial","scale","animate","exit","filter","transition","duration","ease","style","position","top","left","right","height","background","overflow","zIndex","display","justifyContent","alignItems","flexDirection","textAlign","onClick","h1","color","fontSize","p","delay","marginTop","scaleX","width","margin","transformOrigin","viewBox","preserveAspectRatio","pointerEvents","animation","bottom"],"sources":["/Users/apple/Desktop/air-quality-visualization-main/src/components/HeroOpening.jsx"],"sourcesContent":["// 文件：src/components/HeroOpening.jsx\nimport React, { useEffect, useState, useRef } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\n\nconst HeroOpening = () => {\n  const fullText = '这几年，宁波的空气怎么样了？';\n  const [displayedText, setDisplayedText] = useState('');\n  const [fadeOut, setFadeOut] = useState(false);\n  const seed = useRef(Math.random() * 1000);\n  const startTimeRef = useRef(Date.now());\n  const rafRef = useRef();\n\n  // 打字 + 1.5s 后触发消失\n  useEffect(() => {\n    window.scrollTo(0, 0);\n    let i = 0;\n    const typing = setInterval(() => {\n      setDisplayedText(fullText.slice(0, i + 1));\n      i++;\n      if (i > fullText.length) {\n        clearInterval(typing);\n        setTimeout(() => setFadeOut(true), 1500);\n      }\n    }, 100);\n    return () => clearInterval(typing);\n  }, []);\n\n  // 请求动画帧循环（给波浪用）\n  useEffect(() => {\n    function loop() {\n      rafRef.current = requestAnimationFrame(loop);\n    }\n    loop();\n    return () => cancelAnimationFrame(rafRef.current);\n  }, []);\n\n  // 生成“指纹式”统一波浪\n  const generateWavePaths = () => {\n    const t = (Date.now() - startTimeRef.current) / 1000;\n    const H = window.innerHeight;\n    const spacing = 16;\n    const count = Math.floor(H / spacing) + 4;\n    const maxAmp = 30;\n    const paths = [];\n\n    for (let i = 0; i < count; i++) {\n      const y = i * spacing + 10;\n      const norm = (i - count / 2) / (count / 2);\n      const amp = Math.cos(norm * Math.PI) * maxAmp * (0.5 + 0.5 * Math.sin(t)) + 5;\n      const phase = seed.current + t * 1.2;\n      const offset = Math.sin(phase + i * 0.25) * amp;\n\n      // 三段路径拼接以保证无空缺\n      const d = `\n        M0,${y}\n        Q480,${y - offset} 960,${y}\n        T1920,${y}\n        T2880,${y}\n      `;\n\n      paths.push(\n        <path\n          key={i}\n          d={d}\n          stroke=\"#e6374e\"\n          strokeWidth=\"1.3\"\n          fill=\"none\"\n          opacity=\"0.25\"\n        />\n      );\n    }\n    return paths;\n  };\n\n  return (\n    <AnimatePresence>\n      {!fadeOut && (\n        <motion.div\n          initial={{ opacity: 1, scale: 1 }}\n          animate={{ opacity: 1, scale: 1 }}\n          exit={{\n            opacity: 0,\n            y: -250,\n            scale: 1.2,\n            filter: 'blur(8px)',\n            transition: { duration: 2.6, ease: [0.22, 1, 0.36, 1] }\n          }}\n          style={{\n            position: 'fixed', top: 0, left: 0, right: 0,\n            height: '100vh',\n            background: '#000',\n            overflow: 'hidden',\n            zIndex: 9999,\n            display: 'flex',\n            justifyContent: 'center',\n            alignItems: 'center',\n            flexDirection: 'column',\n            textAlign: 'center'\n          }}\n          onClick={() => setFadeOut(true)}  // 点击可跳过\n        >\n          {/* 打字标题 */}\n          <motion.h1\n            initial={{ opacity: 0, y: 30 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ duration: 2 }}\n            style={{\n              color: '#f96c86',\n              fontSize: '2.4rem',\n              zIndex: 2\n            }}\n          >\n            {displayedText}\n          </motion.h1>\n\n          {/* 作者信息：灰色小字 */}\n          <motion.p\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            transition={{ delay: 2, duration: 1 }}\n            style={{\n              color: '#888',\n              fontSize: '0.9rem',\n              marginTop: '0.5rem',\n              zIndex: 2\n            }}\n          >\n            By Nick Cao, Peter Zhou, Toby Wang\n          </motion.p>\n\n          {/* 分隔线：深灰细横线 */}\n          <motion.div\n            initial={{ scaleX: 0 }}\n            animate={{ scaleX: 1 }}\n            transition={{ delay: 2.5, duration: 0.8, ease: 'easeOut' }}\n            style={{\n              width: '60%',\n              height: '1px',\n              background: '#444',\n              margin: '0.2rem auto 1rem',\n              transformOrigin: 'left center',\n              zIndex: 2\n            }}\n          />\n\n          {/* 波浪条纹 */}\n          <svg\n            viewBox=\"0 0 2880 1000\"\n            preserveAspectRatio=\"none\"\n            style={{\n              position: 'absolute',\n              top: 0, left: 0,\n              width: 'calc(100% + 240px)',\n              height: '100%',\n              pointerEvents: 'none',\n              animation: 'waveScroll 8s linear infinite',\n              zIndex: 1\n            }}\n          >\n            {generateWavePaths()}\n          </svg>\n\n          {/* 底部垂直渐变 */}\n          <div style={{\n            position: 'absolute',\n            bottom: 0, left: 0,\n            width: '100%', height: '160px',\n            background: 'linear-gradient(to top, #7a2d40aa 0%, transparent 100%)',\n            animation: 'bottomGlow 4s ease-in-out infinite alternate',\n            zIndex: 0\n          }} />\n\n          <style>{`\n            @keyframes waveScroll {\n              0% { transform: translateX(0); }\n              100% { transform: translateX(-240px); }\n            }\n            @keyframes bottomGlow {\n              0% { opacity: 0.2; }\n              100% { opacity: 0.5; }\n            }\n          `}</style>\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n};\n\nexport default HeroOpening;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}