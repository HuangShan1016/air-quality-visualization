{"ast":null,"code":"// 文件：src/components/ViewCounter.jsx\nimport React,{useEffect,useState}from'react';import'./ViewCounter.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ViewCounter=()=>{const[count,setCount]=useState(0);const[display,setDisplay]=useState(0);useEffect(()=>{fetch('https://counterapi.dev/api/HuangShan1016/air-visual-site').then(res=>res.json()).then(data=>{const target=data.count||0;// 平滑数字动画\nlet current=0;const step=Math.max(Math.floor(target/30),1);const interval=setInterval(()=>{current+=step;if(current>=target){setDisplay(target);clearInterval(interval);}else{setDisplay(current);}},20);setCount(target);});},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"view-counter\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"view-number\",children:display.toLocaleString()}),/*#__PURE__*/_jsx(\"div\",{className:\"view-label\",children:\"\\u5DF2\\u8BBF\\u95EE\\u672C\\u7AD9\"})]});};export default ViewCounter;","map":{"version":3,"names":["React","useEffect","useState","jsx","_jsx","jsxs","_jsxs","ViewCounter","count","setCount","display","setDisplay","fetch","then","res","json","data","target","current","step","Math","max","floor","interval","setInterval","clearInterval","className","children","toLocaleString"],"sources":["/Users/apple/Desktop/air-quality-visualization-main/src/components/ViewCounter.jsx"],"sourcesContent":["// 文件：src/components/ViewCounter.jsx\nimport React, { useEffect, useState } from 'react';\nimport './ViewCounter.css';\n\nconst ViewCounter = () => {\n  const [count, setCount] = useState(0);\n  const [display, setDisplay] = useState(0);\n\n  useEffect(() => {\n    fetch('https://counterapi.dev/api/HuangShan1016/air-visual-site')\n      .then(res => res.json())\n      .then(data => {\n        const target = data.count || 0;\n        // 平滑数字动画\n        let current = 0;\n        const step = Math.max(Math.floor(target / 30), 1);\n        const interval = setInterval(() => {\n          current += step;\n          if (current >= target) {\n            setDisplay(target);\n            clearInterval(interval);\n          } else {\n            setDisplay(current);\n          }\n        }, 20);\n        setCount(target);\n      });\n  }, []);\n\n  return (\n    <div className=\"view-counter\">\n      <div className=\"view-number\">{display.toLocaleString()}</div>\n      <div className=\"view-label\">已访问本站</div>\n    </div>\n  );\n};\n\nexport default ViewCounter;"],"mappings":"AAAA;AACA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAO,mBAAmB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE3B,KAAM,CAAAC,WAAW,CAAGA,CAAA,GAAM,CACxB,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGP,QAAQ,CAAC,CAAC,CAAC,CACrC,KAAM,CAACQ,OAAO,CAAEC,UAAU,CAAC,CAAGT,QAAQ,CAAC,CAAC,CAAC,CAEzCD,SAAS,CAAC,IAAM,CACdW,KAAK,CAAC,0DAA0D,CAAC,CAC9DC,IAAI,CAACC,GAAG,EAAIA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACvBF,IAAI,CAACG,IAAI,EAAI,CACZ,KAAM,CAAAC,MAAM,CAAGD,IAAI,CAACR,KAAK,EAAI,CAAC,CAC9B;AACA,GAAI,CAAAU,OAAO,CAAG,CAAC,CACf,KAAM,CAAAC,IAAI,CAAGC,IAAI,CAACC,GAAG,CAACD,IAAI,CAACE,KAAK,CAACL,MAAM,CAAG,EAAE,CAAC,CAAE,CAAC,CAAC,CACjD,KAAM,CAAAM,QAAQ,CAAGC,WAAW,CAAC,IAAM,CACjCN,OAAO,EAAIC,IAAI,CACf,GAAID,OAAO,EAAID,MAAM,CAAE,CACrBN,UAAU,CAACM,MAAM,CAAC,CAClBQ,aAAa,CAACF,QAAQ,CAAC,CACzB,CAAC,IAAM,CACLZ,UAAU,CAACO,OAAO,CAAC,CACrB,CACF,CAAC,CAAE,EAAE,CAAC,CACNT,QAAQ,CAACQ,MAAM,CAAC,CAClB,CAAC,CAAC,CACN,CAAC,CAAE,EAAE,CAAC,CAEN,mBACEX,KAAA,QAAKoB,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3BvB,IAAA,QAAKsB,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAEjB,OAAO,CAACkB,cAAc,CAAC,CAAC,CAAM,CAAC,cAC7DxB,IAAA,QAAKsB,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAC,gCAAK,CAAK,CAAC,EACpC,CAAC,CAEV,CAAC,CAED,cAAe,CAAApB,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}